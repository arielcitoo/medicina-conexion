<!-- shared/components/header.html (Corregido) -->
<header class="session-header">
  @if (mostrarHeader) {
  <div class="header-container">
    <!-- Logo CNS -->
    <div class="logo-section">
      <mat-icon class="logo-icon">medical_services</mat-icon>
      <div class="logo-text">
        <h2>Medicina del Trabajo</h2>
        <p>Sistemas C.N.S.</p>
      </div>
    </div>

    <!-- Información de Sesión -->
    @if (idAcceso) {
    <div class="session-info">
      <!-- ID de Acceso -->
      <div class="info-item id-item" (click)="copiarId()" [matTooltip]="'Copiar ID: ' + idAcceso">
        <mat-icon class="info-icon">vpn_key</mat-icon>
        <div class="info-content">
          <span class="label">ID de Acceso</span>
          <span class="value">{{ idAccesoFormateado }}</span>
        </div>
        @if (!copiado) {
          <mat-icon class="copy-icon">content_copy</mat-icon>
        }
        @if (copiado) {
          <mat-icon class="copy-icon">check</mat-icon>
        }
      </div>

      <!-- Empresa -->
      @if (empresa) {
      <div class="info-item empresa-item" [matTooltip]="empresa.razonSocial">
        <mat-icon class="info-icon">business</mat-icon>
        <div class="info-content">
          <span class="label">Empresa</span>
          <span class="value">
            {{ truncarTexto(empresa.razonSocial, 20) }}
          </span>
        </div>
      </div>
      }

      <!-- Estado de Sesión -->
      <div class="info-item estado-item" [class.expira-pronto]="expiraPronto">
        <mat-icon class="info-icon">{{ estadoIcon }}</mat-icon>
        <div class="info-content">
          <span class="label">Sesión</span>
          <span class="value">
            {{ estadoTexto }}
            @if (diasRestantes > 0) {
            <span class="tiempo-restante">
              ({{ diasRestantes }}d)
            </span>
            }
          </span>
        </div>
      </div>
    </div>
    }

    <!-- Acciones -->
    <div class="header-actions">
      <button mat-icon-button class="action-btn" [matMenuTriggerFor]="menu">
        <mat-icon>more_vert</mat-icon>
      </button>
      
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="copiarId()">
          <mat-icon>content_copy</mat-icon>
          <span>Copiar ID</span>
        </button>
        <button mat-menu-item (click)="verDetalles()">
          <mat-icon>info</mat-icon>
          <span>Detalles de sesión</span>
        </button>
        <mat-divider></mat-divider>
        <button mat-menu-item (click)="cerrarSesion()" class="logout-btn">
          <mat-icon>logout</mat-icon>
          <span>Cerrar sesión</span>
        </button>
      </mat-menu>
    </div>
  </div>

  <!-- Barra de progreso -->
  @if (mostrarProgreso) {
  <div class="progress-bar">
    <div class="progress-fill" [style.width.%]="porcentajeProgreso"></div>
  </div>
  }
  }
</header>