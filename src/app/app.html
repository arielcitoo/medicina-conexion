 <div style="font-family: Arial; padding: 20px; max-width: 800px; margin: 0 auto;">
      
      <!-- T√≠tulo -->
      <div style="text-align: center; margin-bottom: 30px;">
        <h1 style="color: #0d9488;">üè• Prueba de Conexi√≥n API CNS</h1>
        <p>Token JWT detectado: <code>{{ tokenInfo }}</code></p>
      </div>
      
      <!-- Bot√≥n de prueba -->
      <div style="text-align: center; margin: 40px 0;">
        <button (click)="probarConexion()" 
                [disabled]="cargando"
                style="padding: 15px 30px; font-size: 16px; background: #0d9488; color: white; border: none; border-radius: 8px; cursor: pointer;">
          
          {{ cargando ? '‚è≥ CONECTANDO...' : 'üöÄ PROBAR CONEXI√ìN' }}
          
        </button>
      </div>
      
      <!-- Estado de carga -->
      <div *ngIf="cargando" style="text-align: center; padding: 30px;">
        <div style="font-size: 48px; margin-bottom: 20px;">‚è≥</div>
        <p>Conectando con el servidor API CNS...</p>
        <p style="color: #6b7280; font-size: 14px;">Esto puede tardar unos segundos</p>
      </div>
      
      <!-- Error -->
      <div *ngIf="error && !cargando" style="background: #fee2e2; padding: 25px; border-radius: 10px; margin: 20px 0;">
        <h2 style="color: #dc2626;">‚ùå ERROR {{ error.status }}</h2>
        <p><strong>{{ error.message }}</strong></p>
        
        <!-- Soluciones espec√≠ficas -->
        <div style="background: #fffbeb; padding: 15px; border-radius: 5px; margin-top: 15px;">
          <h4 style="color: #92400e;">üîß POSIBLES SOLUCIONES:</h4>
          <ul>
            <li *ngIf="error.status === 401">
              <strong>Token expirado:</strong> Los tokens JWT caducan. 
              <br>‚úÖ <em>Soluci√≥n:</em> Genera un NUEVO token en Swagger y actual√≠zalo.
            </li>
            <li *ngIf="error.status === 0">
              <strong>Problema de CORS:</strong> El navegador bloquea la petici√≥n.
              <br>‚úÖ <em>Soluci√≥n:</em> Usa un proxy o configura CORS en el servidor.
            </li>
            <li>
              <strong>Token incorrecto:</strong> El formato no es v√°lido.
              <br>‚úÖ <em>Soluci√≥n:</em> Aseg√∫rate de copiar TODO el token (3 partes separadas por puntos).
            </li>
          </ul>
        </div>
        
        <!-- Bot√≥n para recargar -->
        <div style="text-align: center; margin-top: 20px;">
          <button (click)="probarConexion()" 
                  style="padding: 10px 20px; background: #dc2626; color: white; border: none; border-radius: 5px;">
            üîÑ Intentar de nuevo
          </button>
        </div>
      </div>
      
      <!-- √âxito -->
      <div *ngIf="datos && !cargando" style="background: #f0fdf4; padding: 25px; border-radius: 10px; margin: 20px 0;">
        <h2 style="color: #10b981;">‚úÖ ¬°CONEXI√ìN EXITOSA!</h2>
        
        <!-- Informaci√≥n b√°sica -->
        <div style="background: white; padding: 20px; border-radius: 8px; margin: 20px 0;">
          <h3>üë§ Informaci√≥n del Asegurado</h3>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 15px;">
            <div>
              <strong>Nombre:</strong><br>
              {{ datos.nombres }} {{ datos.paterno }} {{ datos.materno }}
            </div>
            <div>
              <strong>Documento:</strong><br>
              {{ datos.documentoIdentidad }}
            </div>
            <div>
              <strong>Matr√≠cula:</strong><br>
              {{ datos.matricula }}
            </div>
            <div>
              <strong>Estado:</strong><br>
              <span [style]="getEstadoStyle(datos.estadoAsegurado)">
                {{ datos.estadoAsegurado }}
              </span>
            </div>
          </div>
        </div>
        
        <!-- Botones adicionales -->
        <div style="display: flex; gap: 10px; margin-top: 20px;">
          <button (click)="verTodosLosDatos = !verTodosLosDatos"
                  style="flex: 1; padding: 10px; background: #0d9488; color: white; border: none; border-radius: 5px;">
            {{ verTodosLosDatos ? 'üëÜ OCULTAR' : 'üëá VER' }} TODOS LOS DATOS
          </button>
          
          <button (click)="probarConexion()"
                  style="flex: 1; padding: 10px; background: #3b82f6; color: white; border: none; border-radius: 5px;">
            üîÑ CONSULTAR OTRA VEZ
          </button>
        </div>
        
        <!-- Todos los datos (oculto por defecto) -->
        <div *ngIf="verTodosLosDatos" style="margin-top: 20px;">
          <h4>üìã Todos los datos recibidos:</h4>
          <pre style="background: #1f2937; color: white; padding: 15px; border-radius: 8px; overflow: auto; font-size: 12px; max-height: 400px;">
{{ datos | json }}
          </pre>
        </div>
      </div>
      
      <!-- Informaci√≥n de debug -->
      <div style="background: #f8fafc; padding: 15px; border-radius: 8px; margin-top: 30px; font-size: 13px;">
        <h4>üêõ INFORMACI√ìN T√âCNICA:</h4>
        <p><strong>URL:</strong> https://api-desarrollo.cns.gob.bo/erpcns/v1/Asegurados/AseguradoTitular</p>
        <p><strong>Par√°metros:</strong> DocumentoIdentidad=4088715, FechaNacimiento=1982-12-27</p>
        <p><strong>Token:</strong> {{ tokenInfo }}</p>
        <p><strong>Longitud token:</strong> {{ tokenLength }} caracteres</p>
      </div>
      
    </div>